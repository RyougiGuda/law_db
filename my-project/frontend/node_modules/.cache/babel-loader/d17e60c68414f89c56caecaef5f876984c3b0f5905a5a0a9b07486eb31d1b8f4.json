{"ast":null,"code":"// frontend/src/TagPage.js\nimport React,{useState,useEffect,useCallback}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{motion}from\"framer-motion\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function TagPage(){const{tag}=useParams();const navigate=useNavigate();const[data,setData]=useState({laws:[],applications:[]});const[loading,setLoading]=useState(false);const fetchData=useCallback(()=>{setLoading(true);const url=`http://localhost:5000/search?q=&filterType=all&country=all&tag=${encodeURIComponent(tag)}`;fetch(url).then(res=>res.json()).then(resData=>{setData({laws:Array.isArray(resData.laws)?resData.laws:[],applications:Array.isArray(resData.applications)?resData.applications:[]});setLoading(false);}).catch(err=>{console.error(\"Tag 搜索错误:\",err);setData({laws:[],applications:[]});setLoading(false);});},[tag]);useEffect(()=>{fetchData();},[fetchData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",children:[/*#__PURE__*/_jsxs(motion.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.6},className:\"text-4xl font-bold text-primary mb-4\",children:[\"\\u6807\\u7B7E\\u641C\\u7D22\\uFF1A\",tag]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-500\",children:\"\\u52A0\\u8F7D\\u4E2D...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"\\u6CD5\\u5F8B\\u6761\\u76EE\"}),data.laws.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u8BE5\\u6807\\u7B7E\\u4E0B\\u6682\\u65E0\\u6CD5\\u5F8B\\u6761\\u76EE\\u3002\"}):data.laws.map(law=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-xl shadow-md mb-4 cursor-pointer\",onClick:()=>navigate(`/laws/${law.id}`),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:law.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-2\",children:[law.content.substring(0,100),\"...\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-400 mt-1\",children:[\"\\u56FD\\u5BB6\\uFF1A\",law.country,\" \",law.tags&&`| 标签：${law.tags}`,\" \",law.categories&&`| 分类：${law.categories}`]})]},law.id))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"\\u5E94\\u7528\\u6848\\u4F8B\"}),data.applications.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u8BE5\\u6807\\u7B7E\\u4E0B\\u6682\\u65E0\\u5E94\\u7528\\u6848\\u4F8B\\u3002\"}):data.applications.map(appItem=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-xl shadow-md mb-4 cursor-pointer\",onClick:()=>navigate(`/applications/${appItem.id}`),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:appItem.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:appItem.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-400 mt-1\",children:[\"\\u5B50\\u7C7B\\u578B\\uFF1A\",appItem.sub_type===\"case\"?\"案例\":appItem.sub_type===\"journal\"?\"期刊\":\"文书\",\" | \\u56FD\\u5BB6\\uFF1A\",appItem.country,\" \",appItem.tags&&`| 标签：${appItem.tags}`,\" \",appItem.categories&&`| 分类：${appItem.categories}`]})]},appItem.id))]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"mt-6 px-4 py-2 bg-accent hover:bg-orange-600 text-white rounded font-semibold\",children:\"\\u8FD4\\u56DE\"})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","motion","jsxs","_jsxs","jsx","_jsx","TagPage","tag","navigate","data","setData","laws","applications","loading","setLoading","fetchData","url","encodeURIComponent","fetch","then","res","json","resData","Array","isArray","catch","err","console","error","className","children","h1","initial","opacity","y","animate","transition","duration","length","map","law","onClick","id","title","content","substring","country","tags","categories","appItem","description","sub_type"],"sources":["E:/pythonProjects/pythonProject/law_db/my-project/frontend/src/TagPage.js"],"sourcesContent":["// frontend/src/TagPage.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function TagPage() {\r\n  const { tag } = useParams();\r\n  const navigate = useNavigate();\r\n  const [data, setData] = useState({ laws: [], applications: [] });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchData = useCallback(() => {\r\n    setLoading(true);\r\n    const url = `http://localhost:5000/search?q=&filterType=all&country=all&tag=${encodeURIComponent(tag)}`;\r\n    fetch(url)\r\n      .then((res) => res.json())\r\n      .then((resData) => {\r\n        setData({\r\n          laws: Array.isArray(resData.laws) ? resData.laws : [],\r\n          applications: Array.isArray(resData.applications) ? resData.applications : [],\r\n        });\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Tag 搜索错误:\", err);\r\n        setData({ laws: [], applications: [] });\r\n        setLoading(false);\r\n      });\r\n  }, [tag]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-6\">\r\n      <motion.h1\r\n        initial={{ opacity: 0, y: -20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6 }}\r\n        className=\"text-4xl font-bold text-primary mb-4\"\r\n      >\r\n        标签搜索：{tag}\r\n      </motion.h1>\r\n      {loading ? (\r\n        <div className=\"text-center text-gray-500\">加载中...</div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">法律条目</h2>\r\n            {data.laws.length === 0 ? (\r\n              <p className=\"text-gray-500\">该标签下暂无法律条目。</p>\r\n            ) : (\r\n              data.laws.map((law) => (\r\n                <div\r\n                  key={law.id}\r\n                  className=\"bg-white p-4 rounded-xl shadow-md mb-4 cursor-pointer\"\r\n                  onClick={() => navigate(`/laws/${law.id}`)}\r\n                >\r\n                  <h3 className=\"text-xl font-bold text-gray-800\">{law.title}</h3>\r\n                  <p className=\"text-gray-600 mt-2\">{law.content.substring(0, 100)}...</p>\r\n                  <p className=\"text-sm text-gray-400 mt-1\">\r\n                    国家：{law.country} {law.tags && `| 标签：${law.tags}`} {law.categories && `| 分类：${law.categories}`}\r\n                  </p>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">应用案例</h2>\r\n            {data.applications.length === 0 ? (\r\n              <p className=\"text-gray-500\">该标签下暂无应用案例。</p>\r\n            ) : (\r\n              data.applications.map((appItem) => (\r\n                <div\r\n                  key={appItem.id}\r\n                  className=\"bg-white p-4 rounded-xl shadow-md mb-4 cursor-pointer\"\r\n                  onClick={() => navigate(`/applications/${appItem.id}`)}\r\n                >\r\n                  <h3 className=\"text-xl font-bold text-gray-800\">{appItem.title}</h3>\r\n                  <p className=\"text-gray-600 mt-2\">{appItem.description}</p>\r\n                  <p className=\"text-sm text-gray-400 mt-1\">\r\n                    子类型：{appItem.sub_type === \"case\" ? \"案例\" : appItem.sub_type === \"journal\" ? \"期刊\" : \"文书\"} | 国家：{appItem.country} {appItem.tags && `| 标签：${appItem.tags}`} {appItem.categories && `| 分类：${appItem.categories}`}\r\n                  </p>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <button\r\n        onClick={() => navigate(-1)}\r\n        className=\"mt-6 px-4 py-2 bg-accent hover:bg-orange-600 text-white rounded font-semibold\"\r\n      >\r\n        返回\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}